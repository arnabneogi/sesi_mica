From 009254e137768422584c8f3891ac87378a35b914 Mon Sep 17 00:00:00 2001
From: dwerbam <dwerbam@gmail.com>
Date: Tue, 5 Aug 2014 11:12:44 +0200
Subject: [PATCH] added support for vocabulary_url

---
 .../extensions/mica_opal/mica_opal_view/ServicesOpalFormatter.inc  | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/src/main/drupal/modules/mica/extensions/mica_opal/mica_opal_view/ServicesOpalFormatter.inc b/src/main/drupal/modules/mica/extensions/mica_opal/mica_opal_view/ServicesOpalFormatter.inc
index 5749fe1..67dde48 100644
--- a/src/main/drupal/modules/mica/extensions/mica_opal/mica_opal_view/ServicesOpalFormatter.inc
+++ b/src/main/drupal/modules/mica/extensions/mica_opal/mica_opal_view/ServicesOpalFormatter.inc
@@ -137,6 +137,13 @@ class ServicesOpalFormatter implements ServicesFormatterInterface {
     $attributes = $variable_element->appendChild($this->doc->createElement('attributes'));
     $this->addAttribute($attributes, 'uuid', 'text', '', $wrapper->uuid->value(), self::MAELSTROM_NS);
 
+    //add vocabulary_url for each language
+    foreach ($this->languages as $language) {
+      $url = $wrapper->language($language)->field_vocabulary_url->value();
+      $this->addAttribute($attributes, 'vocabulary_url', 'text', $language, $url, self::MAELSTROM_NS);
+    } 
+    
+
     foreach ($this->languages as $language) {
       $this->addAttribute($attributes, 'label', 'text', $language, $wrapper->language($language)->field_label->value());
     }
-- 
1.8.5.2 (Apple Git-48)

